<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Example - AJAX</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript">

    function display(){

      var searchNumber =   document.getElementById('number').value;
      var url ="https://public-us.opendatasoft.com/api/records/1.0/search/?";
      var data = "dataset=us-colleges-and-universities&sort=tot_enroll&rows="+searchNumber;

      $.get(url,data).done(function(response){

        $("colleges").html('');
        $("#colleges").append('<h2>'+searchNumber+ ' Top Universities by Enrollment' +'</h2>');

        for(var i = 0; i < response.records.length; i++){
          $("#colleges").append('<p>'+response.records[i].fields.name+'</p>');
          $("#colleges").append('<p> Enrollment: '+response.records[i].fields.tot_enroll+'</p>');

          //  $("#colleges").add('<p>'+response.records[i].fields.name+'</p>');
        }
      });
    }

    $(document).ready(function(){
      $("#display").on("click",display);
      // display();
    });

    </script>

  </head>
  <body>
    <main id="main">
      <h1>Search Top Universities by Enrollment</h1>
      <input id="number" type="text"  placeholder="How many top universities?">
      <br>
      <button id = "display">
        Display
      </button>
      <div id="colleges">
      </div>
    </main>

    <hr>
    <footer>
      <p>Jack Luu, Copyright &copy; 2020 - IT353 - Web Development Technologies </p>
        <script> document.write("Last Modified: "+ document.lastModified); </script>
    </footer>
</body>
</html>
